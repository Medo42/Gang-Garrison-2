<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="STEP" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">if server == -1
{
    if instance_exists(LobbyController)
    {
        var tempServer;
        for (i=0; i&lt;ds_list_size(LobbyController.servers); i+=1)
        {
            tempServer = ds_list_find_value(LobbyController.servers, i);
            if tempServer.name == serverName
            {
                server = tempServer;
                break;
            }
        }

        if server == -1// Server disappeared
        {
            exit;// Wait until it reappears, or the user clicks somewhere else.
        }
    }
}

if server.slots-server.players &gt; 0
{
    global.isHost = false;
    global.serverIP = server.ip;
    global.serverPort = server.port;
    if(instance_exists(Client))
    {   // We can't _actually_ destroy and recreate the Client here, because destroying it will cause a room change and that will cause the Create event not to run... Yay, GM!
        with(Client)
        {
            event_perform(ev_destroy,0);
            ClientCreate();
        }
    }
    else
    {
        instance_create(0,0,Client);
    }
    Client.returnRoom = Lobby;
}

with LobbySideController
{
    event_user(0);
}
</argument>
      </arguments>
    </action>
  </actions>
</event>
