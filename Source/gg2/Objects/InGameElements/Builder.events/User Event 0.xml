<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="OTHER" id="10">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">TOGGLE = 0;
TOOLTIP = 0;
TOGGLED = 1;
SPRITE = 2;
TEXT = 2;
IMAGE = 3;
INDEX = 4;

var i, button, j;
for(i=0; i&lt;ds_list_size(global.buttons); i+=1) {
    button = ds_list_find_value(global.buttons, i);
    buttons[i, TOGGLE] = ds_map_find_value(button, "toggle");
    buttons[i, TOGGLED] = ds_map_find_value(button, "active");
    buttons[i, TEXT] = ds_map_find_value(button, "name");
}

j=0;
for(i=0; i&lt;ds_list_size(global.entities); i+=1) {
    button = ds_list_find_value(global.entityData, i);
    if (ds_map_find_value(button, "gamemode") == -1 || (ds_map_find_value(button, "gamemode") &amp; gamemode) &gt; 0 || gamemode == 1) {
        entityButtons[j, TOGGLED] = false;
        entityButtons[j, SPRITE] = ds_map_find_value(button, "button_sprite");
        entityButtons[j, IMAGE] = ds_map_find_value(button, "button_image");
        entityButtons[j, TOOLTIP] = ds_map_find_value(button, "tooltip");
        entityButtons[j, INDEX] = i;
        j+=1;
    }
}

entityButtonCount = j;
resetToggles();
startX2 = view_wview[0] - vItems*entityButtonSize - 1;
</argument>
      </arguments>
    </action>
  </actions>
</event>
